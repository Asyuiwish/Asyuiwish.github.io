<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VUE | Yui的学习笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/daydayup/lemon.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/daydayup/assets/css/0.styles.0ada6455.css" as="style"><link rel="preload" href="/daydayup/assets/js/app.575842d2.js" as="script"><link rel="preload" href="/daydayup/assets/js/2.a8ff37b3.js" as="script"><link rel="preload" href="/daydayup/assets/js/4.41d9d87c.js" as="script"><link rel="prefetch" href="/daydayup/assets/js/10.473ef0e4.js"><link rel="prefetch" href="/daydayup/assets/js/11.9534baf2.js"><link rel="prefetch" href="/daydayup/assets/js/12.1e538ecd.js"><link rel="prefetch" href="/daydayup/assets/js/13.9eb52d1f.js"><link rel="prefetch" href="/daydayup/assets/js/14.71c4103f.js"><link rel="prefetch" href="/daydayup/assets/js/15.1bd40964.js"><link rel="prefetch" href="/daydayup/assets/js/16.75cfc833.js"><link rel="prefetch" href="/daydayup/assets/js/17.41a26253.js"><link rel="prefetch" href="/daydayup/assets/js/18.10d438b0.js"><link rel="prefetch" href="/daydayup/assets/js/3.fcb4ca96.js"><link rel="prefetch" href="/daydayup/assets/js/5.b6c73fb8.js"><link rel="prefetch" href="/daydayup/assets/js/6.c7a0101d.js"><link rel="prefetch" href="/daydayup/assets/js/7.be90f8c7.js"><link rel="prefetch" href="/daydayup/assets/js/8.2b263773.js"><link rel="prefetch" href="/daydayup/assets/js/9.1d1e80fc.js">
    <link rel="stylesheet" href="/daydayup/assets/css/0.styles.0ada6455.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/daydayup/" class="home-link router-link-active"><img src="/daydayup/flag.png" alt="Yui的学习笔记" class="logo"> <span class="site-name can-hide">Yui的学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/daydayup/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/daydayup/audition/" class="nav-link router-link-active">
  细细碎碎的知识点
</a></div><div class="nav-item"><a href="/daydayup/question/" class="nav-link">
  踩坑辣写bug辣
</a></div><div class="nav-item"><a href="/daydayup/function/" class="nav-link">
  记一些常用方法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发ing" class="dropdown-title"><span class="title">开发ing</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发ing" class="mobile-dropdown-title"><span class="title">开发ing</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daydayup/audition/" class="nav-link router-link-active">
  没写完
</a></li><li class="dropdown-item"><!----> <a href="/daydayup/question/" class="nav-link">
  真的没写完
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Asyuiwish" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/daydayup/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/daydayup/audition/" class="nav-link router-link-active">
  细细碎碎的知识点
</a></div><div class="nav-item"><a href="/daydayup/question/" class="nav-link">
  踩坑辣写bug辣
</a></div><div class="nav-item"><a href="/daydayup/function/" class="nav-link">
  记一些常用方法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发ing" class="dropdown-title"><span class="title">开发ing</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发ing" class="mobile-dropdown-title"><span class="title">开发ing</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/daydayup/audition/" class="nav-link router-link-active">
  没写完
</a></li><li class="dropdown-item"><!----> <a href="/daydayup/question/" class="nav-link">
  真的没写完
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Asyuiwish" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/daydayup/audition/" aria-current="page" class="sidebar-link">Hello VuePress!</a></li><li><a href="/daydayup/audition/browser.html" class="sidebar-link">浏览器</a></li><li><a href="/daydayup/audition/css.html" class="sidebar-link">CSS</a></li><li><a href="/daydayup/audition/javascript.html" class="sidebar-link">JS</a></li><li><a href="/daydayup/audition/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/daydayup/audition/vue.html" aria-current="page" class="active sidebar-link">VUE</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#vue的生命周期" class="sidebar-link">vue的生命周期</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#computed计算属性" class="sidebar-link">computed计算属性</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#通信、传值的方法" class="sidebar-link">通信、传值的方法</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#v-model双向绑定" class="sidebar-link">v-model双向绑定</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#为什么data是一个函数" class="sidebar-link">为什么data是一个函数</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#为什么要设置key" class="sidebar-link">为什么要设置key</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#keep-alive" class="sidebar-link">keep-alive</a></li><li class="sidebar-sub-header"><a href="/daydayup/audition/vue.html#forceupdate-强制重新渲染" class="sidebar-link">$forceUpdate  强制重新渲染</a></li></ul></li><li><a href="/daydayup/audition/browser.html" class="sidebar-link">浏览器</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue"><a href="#vue" class="header-anchor">#</a> VUE</h1> <h2 id="vue的生命周期"><a href="#vue的生命周期" class="header-anchor">#</a> vue的生命周期</h2> <p><img src="/daydayup/assets/img/vue_1.6f2c97f0.png" alt="vue的生命周期">
扩展：
<img src="/daydayup/assets/img/vue_2.c9b83033.png" alt="vue的生命周期"></p> <h2 id="路由"><a href="#路由" class="header-anchor">#</a> 路由</h2> <p>vue-router官方文档 <a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vue-router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="vue-route钩子函数"><a href="#vue-route钩子函数" class="header-anchor">#</a> vue-route钩子函数</h3> <p><img src="/daydayup/assets/img/vue_3.b6f52661.png" alt="vue-router钩子函数"></p> <ul><li>无论访问哪一个路径都会触发全局钩子函数</li> <li>单个路由里的钩子只有访问到该路由才触发</li> <li>组件路由钩子是写在组件中访问路径，即将渲染组件时触发<br> <br></li> <li>next: Function: 一定要调用该方法来 resolve 这个钩子。执行效果依赖 next 方法的调用参数。
<ul><li><p>next(): 进行管道中的下一个钩子。如果全部钩子执行完了，则导航的状态就是 confirmed (确认的)。</p></li> <li><p>next(false): 中断当前的导航。如果浏览器的 URL 改变了 (可能是用户手动或者浏览器后退按钮)，那么 URL 地址会重置到 from 路由对应的地址。</p></li> <li><p>next('/') 或者 next({ path: '/' }): 跳转到一个不同的地址。当前的导航被中断，然后进行一个新的导航。你可以向 next 传递任意位置对象，且允许设置诸如 replace: true、name: 'home' 之类的选项以及任何用在 router-link 的 to prop 或 router.push 中的选项。</p></li> <li><p>next(error): (2.4.0+) 如果传入 next 的参数是一个 Error 实例，则导航会被终止且该错误会被传递给 router.onError() 注册过的回调。
<b>确保 next 函数在任何给定的导航守卫中都被严格调用一次。它可以出现多于一次，但是只能在所有的逻辑路径都不重叠的情况下，否则钩子永远都不会被解析或报错。</b>这里有一个在用户未能验证身份时重定向到 /login 的示例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// BAD</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'Login'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isAuthenticated<span class="token punctuation">)</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Login'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 如果用户未能验证身份，则 `next` 会被调用两次</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// GOOD</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'Login'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isAuthenticated<span class="token punctuation">)</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Login'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul></li> <li>离开守卫-通常用来禁止用户未保存更改时离开</li></ul> <h3 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h3> <p>如果提供了 path，params 会被忽略，上述例子中的 query 并不属于这种情况。取而代之的是下面例子的做法，你需要提供路由的 name 或手写完整的带有参数的 path：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token string">'123'</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
<span class="token comment">// 这里的 params 不生效</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user</span>
</code></pre></div><table><thead><tr><th style="text-align:center;">模式</th> <th style="text-align:center;">匹配路径</th> <th style="text-align:center;">$route.params</th></tr></thead> <tbody><tr><td style="text-align:center;">/user/:username</td> <td style="text-align:center;">/user/evan</td> <td style="text-align:center;"><code>{ username: 'evan' }</code></td></tr> <tr><td style="text-align:center;">/user/:username/post/:post_id</td> <td style="text-align:center;">/user/evan/post/123</td> <td style="text-align:center;"><code>{ username:'evan', post_id: '123' }</code></td></tr></tbody></table> <h3 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> User<span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 当 /user/:id/profile 匹配成功，</span>
          <span class="token comment">// UserProfile 会被渲染在 User 的 &lt;router-view&gt; 中</span>
          path<span class="token operator">:</span> <span class="token string">'profile'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> UserProfile
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 当 /user/:id/posts 匹配成功</span>
          <span class="token comment">// UserPosts 会被渲染在 User 的 &lt;router-view&gt; 中</span>
          path<span class="token operator">:</span> <span class="token string">'posts'</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> UserPosts
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//从a重定向到b</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token string">'/b'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//重定向的路由也可以是一个命名的路由</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//动态返回重定向目标</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/a'</span><span class="token punctuation">,</span> <span class="token function-variable function">redirect</span><span class="token operator">:</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 方法接收 目标路由 作为参数</span>
      <span class="token comment">// return 重定向的 字符串路径/路径对象</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="路由的两种模式"><a href="#路由的两种模式" class="header-anchor">#</a> 路由的两种模式</h3> <p>vue-router 默认 hash 模式。</p> <h4 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h4> <p>当 URL 改变时，页面不会重新加载。</p> <h4 id="history"><a href="#history" class="header-anchor">#</a> history</h4> <p>如果后台没有正确的配置，当用户在浏览器直接访问 http://oursite.com/user/id 就会返回 404，这就不好看了。
所以呢，你要在服务端增加一个覆盖所有情况的候选资源：如果 URL 匹配不到任何静态资源，则应该返回同一个 index.html 页面，这个页面就是你 app 依赖的页面。<br>
路由的切换：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//包括 back,forward,go三个方法，对应浏览器的前进，后退，跳转操作</span>
history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//后退两次</span>
history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//前进两次</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//后退</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>前进
</code></pre></div><p>路由的修改:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//包括了pushState,replaceState两个方法,这两个方法接收三个参数:stateObj,title,url</span>
history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token operator">:</span><span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onpopstate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>state<span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>state <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>state<span class="token punctuation">.</span>color <span class="token operator">===</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>通过pushstate把页面的状态保存在state对象中，当页面的url再变回这个url时，可以通过event.state取到这个state对象，从而可以对页面状态进行还原，这里的页面状态就是页面字体颜色，其实滚动条的位置，阅读进度，组件的开关的这些页面状态都可以存储到state的里面。</p> <h2 id="computed计算属性"><a href="#computed计算属性" class="header-anchor">#</a> computed计算属性</h2> <p>计算函数，复杂的计算都应该放在这里，尽量不要直接在模板语法里面计算，在此处计算的值是会动态变的，即计算的数中有一个值变了，最终结果也会跟着变，类似于封装的计算函数,即<code>【计算属性是基于它们的响应式依赖进行缓存的,当其依赖的属性的值发生变化时，计算属性会重新计算，反之，则使用缓存中的属性值】</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>computed<span class="token operator">:</span><span class="token punctuation">{</span> 
    <span class="token function-variable function">addNum</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//addnum可以直接在模板语法里面用，相当于data内的值</span>
        <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nums<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num1<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="watch侦听属性"><a href="#watch侦听属性" class="header-anchor">#</a> $watch侦听属性</h3> <p><code>vm.$watch</code>监听数据变化</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>data<span class="token operator">:</span><span class="token punctuation">{</span>
    a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> 
    b<span class="token operator">:</span><span class="token punctuation">{</span> 
        c<span class="token operator">:</span><span class="token number">1</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> 
watch<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//普通的watch监听</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a: &quot;</span><span class="token operator">+</span>val<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span><span class="token punctuation">{</span><span class="token comment">//深度监听，可监听到对象、数组的变化</span>
        <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b.c: &quot;</span><span class="token operator">+</span>val<span class="token punctuation">.</span>c<span class="token punctuation">,</span> oldVal<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
        deep<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 深度监听 (属性变化)</span>
    <span class="token comment">//配置项immediate，默认为false。设置之后在数据绑定时就会执行handler函数，而不是在数据改变后才执行</span>
    <span class="token punctuation">}</span> 
 <span class="token punctuation">}</span>

<span class="token comment">//对于组件选项外定义的监听函数，需要手动调用unWatch（）函数进行注销</span>

vm<span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>oldVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
</code></pre></div><h3 id="和-watch侦听属性的区别"><a href="#和-watch侦听属性的区别" class="header-anchor">#</a> 和$watch侦听属性的区别</h3> <p>  watch一般用于监控路由、input输入框的值特殊处理等等，它比较适合的场景是一对多（浏览器自适应、监控路由对象、监控自身属性变化），computed则是多对一和一对一（监听到数据变化从而进行某一个操作）（计算总价格、过滤某些数据）。</p> <ol><li>computed是计算值，只有值发生变化才会执行方法，watch是监听观察动作，有改变就执行</li> <li>computed具有<code>缓存性</code>，数据变化时先读取缓存，值没变这不做操作，而watch没有缓存，直接执行</li> <li>watch接收两个参数（新，旧）</li> <li>watch可以在数据变化时做一些<code>异步处理</code>或开销大的操作</li></ol> <h2 id="通信、传值的方法"><a href="#通信、传值的方法" class="header-anchor">#</a> 通信、传值的方法</h2> <h3 id="路由传参"><a href="#路由传参" class="header-anchor">#</a> 路由传参</h3> <h4 id="params传参"><a href="#params传参" class="header-anchor">#</a> params传参</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{name:<span class="token punctuation">'</span>Log<span class="token punctuation">'</span>,params:{num:666}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>显示登录页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>子路由获取的参数：{{this.$route.params.num}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>上述这种利用params不显示url传参的方式会导致在刷新页面的时候，传递的值会丢失； 注意 ': to= ' 前面的冒号</p></div> <h4 id="query传参"><a href="#query传参" class="header-anchor">#</a> query传参</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/conponentsB'</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> orderId<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>orderId
</code></pre></div><p><b>区别：</b></p> <ol><li>params只能用name来引入路由，query传参使用path来引入路由</li> <li>params是路由的一部分,必须要在路由后面添加参数名。query是拼接在url后面的参数，没有也没关系</li> <li>直白的来说query相当于get请求，页面跳转的时候，可以在地址栏看到请求参数，而params相当于post请求，参数不会再地址栏中显示</li></ol> <h3 id="设置session-storage缓存"><a href="#设置session-storage缓存" class="header-anchor">#</a> 设置Session storage缓存</h3> <div class="language-js extra-class"><pre class="language-js"><code>sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'缓存名称'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>orderData<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="父传子-props方法"><a href="#父传子-props方法" class="header-anchor">#</a> 父传子 - props方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//父：</span>
<span class="token operator">&lt;</span>div <span class="token operator">:</span>chuanzhi <span class="token operator">=</span> <span class="token number">123</span><span class="token operator">&gt;</span>
<span class="token comment">//子：</span>
props<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'chuanzhi'</span><span class="token punctuation">]</span>
</code></pre></div><p>父子组件传值数据是异步请求，有可能数据还没有获取到但是此时已经渲染节点了</p> <blockquote><p>解决方案：可以在父组件需要传递数据的节点加上 v-if = false，异步请求获取数据后，v-if = true</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)</span>
    propA<span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token comment">// 多个可能的类型</span>
    propB<span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">,</span> Number<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 必填的字符串</span>
    propC<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 带有默认值的数字</span>
    propD<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 带有默认值的对象</span>
    propE<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token comment">// 对象或数组默认值必须从一个工厂函数获取</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'hello'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 自定义验证函数</span>
    propF<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这个值必须匹配下列字符串中的一个</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token string">'danger'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="子传父-emit方法"><a href="#子传父-emit方法" class="header-anchor">#</a> 子传父 - $emit方法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//子：</span>
methods<span class="token punctuation">{</span>
  <span class="token function">crr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;cz&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;传值&quot;</span><span class="token punctuation">)</span> <span class="token comment">//用cz接收</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//父：</span>
<span class="token operator">&lt;</span>route @cz <span class="token operator">=</span> <span class="token string">&quot;chuanzhi&quot;</span><span class="token operator">&gt;</span>
methods<span class="token punctuation">{</span>
  <span class="token function">chuanzhi</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="兄弟组件传值"><a href="#兄弟组件传值" class="header-anchor">#</a> 兄弟组件传值</h3> <p>定义一个公共的公共实例文件bus.js，作为中间仓库来传值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//bus.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="vuex"><a href="#vuex" class="header-anchor">#</a> VUEX</h3> <p>使用vuex，新建一个 sotre文件夹，分开维护 actions mutations getters</p> <h2 id="v-model双向绑定"><a href="#v-model双向绑定" class="header-anchor">#</a> v-model双向绑定</h2> <p><b>原理：通过Object.defineProperty()方法来进行数据劫持以及发布者-订阅模式实现</b></p> <p>数据劫持：vue实例化的时候会去遍历所有的属性，给这些属性添加get和set方法进行数据劫持。</p> <p>发布者-订阅模式：</p> <ol><li>实现一个<code>监听器Observer</code>，用来劫持并监听所有属性，如果有变动的，就通知订阅者。</li> <li>实现一个<code>订阅者Watcher</code>，可以收到属性的变化通知并执行相应的函数，从而更新视图。</li> <li>实现一个<code>解析器Compile</code>，可以扫描和解析每个节点的相关指令，并根据初始化模板数据以及初始化相应的订阅器。</li></ol> <h3 id="组件的双向绑定"><a href="#组件的双向绑定" class="header-anchor">#</a> 组件的双向绑定</h3> <p>允许一个自定义组件在使用 v-model 时定制 prop 和 event。默认情况下，一个组件上的 v-model 会把 value 用作 prop 且把 input 用作 event，但是一些输入类型比如单选框和复选框按钮可能想使用 value prop 来达到不同的目的。使用 model 选项可以回避这些情况产生的冲突。</p> <p>用v-modle传入，用$emit传出</p> <div class="language-js extra-class"><pre class="language-js"><code>model<span class="token operator">:</span> <span class="token punctuation">{</span>
  prop<span class="token operator">:</span> <span class="token string">'checked'</span><span class="token punctuation">,</span>
  event<span class="token operator">:</span> <span class="token string">'change'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

props<span class="token operator">:</span> <span class="token punctuation">{</span>
  value<span class="token operator">:</span> Number  <span class="token comment">//value就是v-model绑定的值</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="为什么data是一个函数"><a href="#为什么data是一个函数" class="header-anchor">#</a> 为什么data是一个函数</h2> <p><b>只有函数构成作用域。</b>每个组件都有自己的作用域，每个实例相互独立互不影响，经过一次执行得到不同的返回结果。</p> <h2 id="为什么要设置key"><a href="#为什么要设置key" class="header-anchor">#</a> 为什么要设置key</h2> <p>添加唯一标识，高效地更新虚拟DOM</p> <h2 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h2> <blockquote><p>keep-alive是一个抽象组件：它自身不会渲染一个DOM元素，也不会出现在父组件链中；使用keep-alive包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。</p></blockquote> <p>保存页面/组件的状态，避免组件反复创建和渲染，有效提升系统性能。</p> <ul><li>include包含的组件(可以为字符串，数组，以及正则表达式,只有匹配的组件会被缓存)</li> <li>exclude排除的组件(以为字符串，数组，以及正则表达式,任何匹配的组件都不会被缓存)</li> <li>max缓存组件的最大值(类型为字符或者数字,可以控制缓存组件的个数)</li></ul> <h3 id="应用"><a href="#应用" class="header-anchor">#</a> 应用</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 在动态组件中的应用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>whiteList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:exclude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blackList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>amount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentComponent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 在vue-router中的应用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span> <span class="token attr-name">:include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>whiteList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:exclude</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blackList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:max</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>amount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="keep-alive的销毁"><a href="#keep-alive的销毁" class="header-anchor">#</a> keep-alive的销毁</h3> <p>将name设置为数组，绑定在include属性</p> <ul><li>使用 vuex 或者 localstroge 等全局存储方案，创建一个数组 keepAliveArr</li> <li>将缓存组件的 name 存放于 keepAliveArr 数组中</li> <li>将 keepAliveArr 绑定到include 属性上</li> <li>当需要删除缓存组件时，直接删除 keepAliveArr 中的组件 name</li> <li>当需要添加缓存组件时，向 keepAliveArr 中添加组件的 name</li></ul> <h2 id="forceupdate-强制重新渲染"><a href="#forceupdate-强制重新渲染" class="header-anchor">#</a> $forceUpdate  强制重新渲染</h2> <p>以下两种情况效果相等</p> <div class="language-js extra-class"><pre class="language-js"><code>i<span class="token operator">++</span>
vm<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>obj <span class="token punctuation">,</span> <span class="token string">'a'</span> <span class="token punctuation">,</span> i <span class="token punctuation">)</span>

app<span class="token punctuation">.</span>obj <span class="token operator">=</span> i
app<span class="token punctuation">.</span><span class="token function">$forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/28/2021, 10:54:57 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/daydayup/assets/js/app.575842d2.js" defer></script><script src="/daydayup/assets/js/2.a8ff37b3.js" defer></script><script src="/daydayup/assets/js/4.41d9d87c.js" defer></script>
  </body>
</html>
